<div class="section section-basic">
    <div class="container">
        <h3 class="title">Basic Elements</h3>
        <div id="inputs">
            <h4>Bem vindo, {{companyName}}</h4>
            <p class="category"></p>
            <br />
            <br />
            <div class="row">
                <div class="col-md-12 ml-auto col-xl-12 mr-auto">
                    <div class="row">
                        <div class="col-12" *ngIf="pendingAppointments.length > 0">
                            <div class="autosafe-card" style="width:100%;">
                                <div class="nav-tabs-navigation">
                                <div class="nav-tabs-wrapper">
                                    <div class="content">
                                    <p class="dashboard-title">
                                        <i class="now-ui-icons ui-1_calendar-60"></i> Agendamentos Pendentes
                                    </p>
                                    </div>

                                    <div *ngFor="let appt of pendingAppointments" class="mt-2 mb-3" style="border-top:1px solid #eee; padding-top:10px;">
                                    <p class="category" style="margin-bottom:6px;">
                                        <b>{{ appt.clientName }}</b> solicitou: <b>{{ appt.serviceTitle }}</b>
                                    </p>
                                    <p class="category" style="font-size:13px; color:#666;">
                                        {{ appt.requestedDatetime | date:'dd/MM/yyyy HH:mm' }}
                                    </p>
                                    <div class="d-flex gap-2">
                                        <button class="btn btn-success btn-round btn-sm" (click)="approveAppointment(appt.id)">
                                        <i class="now-ui-icons ui-1_check"></i> Aprovar
                                        </button>
                                        <button class="btn btn-danger btn-round btn-sm" (click)="rejectAppointment(appt.id)">
                                        <i class="now-ui-icons ui-1_simple-remove"></i> Rejeitar
                                        </button>
                                    </div>
                                    </div>
                                </div>
                                </div>
                            </div>
                            </div>
                        <div class="col-lg-4 col-md-4 col-sm-12">
                            <!-- Aqui se inicia um novo card, deve ser feito o ngFor aqui-->
                            <div class="autosafe-card">
                                <div class="nav-tabs-navigation">
                                    <div class="nav-tabs-wrapper">
                                        <div class="content">
                                            <p class="dashboard-title"><i class="now-ui-icons ui-1_zoom-bold"></i> Visualizações</p>
                                        </div>
                                        
                                        <div>
                                            <p class="category main-information">{{viewCount}}<a class="category" style="font-size: 15px;"> Acessos hoje </a></p>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-4 col-md-4 col-sm-12">
                            <!-- Aqui se inicia um novo card, deve ser feito o ngFor aqui-->
                            <div class="autosafe-card">
                                <div class="nav-tabs-navigation">
                                    <div class="nav-tabs-wrapper">
                                        <div class="content">
                                            <p class="dashboard-title"><i class="now-ui-icons gestures_tap-01"></i> Cliques no Ligar</p>
                                        </div>
                                       
                                        <div>
                                            <p class="category main-information">{{callCount}}<a class="category" style="font-size: 15px;">  ligações </a></p>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-4 col-md-4 col-sm-12">
                            <!-- Aqui se inicia um novo card, deve ser feito o ngFor aqui-->
                            <div class="autosafe-card">
                                <div class="nav-tabs-navigation">
                                    <div class="nav-tabs-wrapper">
                                        <div class="content">
                                            <p class="dashboard-title"><i class="now-ui-icons sport_trophy"></i> Sua Nota</p>
                                        </div>
                                        
                                        <div>
                                            <p class="category main-information">{{averageRate}}/5<a class="category" style="font-size: 15px;"> {{countReviews}} avaliações </a></p>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>

                          <div class="col-lg-4 col-md-4 col-sm-12">
                            <!-- Aqui se inicia um novo card, deve ser feito o ngFor aqui-->
                            <div class="autosafe-card">
                                <div class="nav-tabs-navigation">
                                    <div class="nav-tabs-wrapper">
                                        <div class="content">
                                            <p class="dashboard-title"><i class="now-ui-icons ui-2_settings-90"></i> Serviços</p>
                                        </div>
                                        
                                        <div>
                                            <p class="category main-information">{{countServices}}<a class="category" style="font-size: 15px;"> Ativos </a></p>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-8 col-md-8 col-sm-12">
                            <!-- Aqui se inicia um novo card, deve ser feito o ngFor aqui-->
                            <div class="autosafe-card">
                                <div class="nav-tabs-navigation">
                                <div class="nav-tabs-wrapper" style="min-height: 158px">
                                    <div class="content">
                                    <p class="dashboard-title">
                                        <i class="now-ui-icons design_bullet-list-67"></i> Informativos
                                    </div>
                                    <div *ngIf="informatives.length > 0; else noNews">
                                    <ul>
                                    <li *ngFor="let info of informatives">
                                        <a *ngIf="info.action"
                                            (click)="info.action()"
                                            style="cursor:pointer; text-decoration:underline; color:#FF7800; font-weight:bold;">
                                            {{ info.message }}
                                        </a>
                                        <span *ngIf="!info.action">{{ info.message }}</span>
                                        </li>
                                    </ul>
                                    </div>
                                <ng-template #noNews>
                                <a class="category">SEM NOVIDADES POR ENQUANTO.</a>
                                </ng-template>
                            </div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>